!function(dust){function _deprecated(e){_deprecatedCache[e]||(_log("Deprecation warning: "+e+" is deprecated and will be removed in a future version of dustjs-helpers","WARN"),_log("For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#"+e.replace(/\W+/g,""),"WARN"),_deprecatedCache[e]=!0)}function isSelect(e){var t=e.current();return"object"==typeof t&&t.isSelect===!0}function jsonFilter(e,t){return"function"==typeof t?t.toString().replace(/(^\s+|\s+$)/gm,"").replace(/\n/gm,"").replace(/,\s*/gm,", ").replace(/\)\{/gm,") {"):t}function filter(e,t,r,n,o){n=n||{};var i,s,a=r.block,l=n.filterOpType||"";if(n.hasOwnProperty("key"))i=dust.helpers.tap(n.key,e,t);else{if(!isSelect(t))return _log("No key specified for filter in:"+l+" helper "),e;i=t.current().selectKey,t.current().isResolved&&(o=function(){return!1})}return s=dust.helpers.tap(n.value,e,t),o(coerce(s,n.type,t),coerce(i,n.type,t))?(isSelect(t)&&(t.current().isResolved=!0),a?e.render(a,t):(_log("No body specified for "+l+" helper "),e)):r.else?e.render(r.else,t):e}function coerce(e,t,r){if(void 0!==e)switch(t||typeof e){case"number":return+e;case"string":return String(e);case"boolean":return e="false"!==e&&e,Boolean(e);case"date":return new Date(e);case"context":return r.get(e)}return e}var _log=dust.log?function(e,t){t=t||"INFO",dust.log(e,t)}:function(){},_deprecatedCache={},helpers={tap:function(e,t,r){if("function"!=typeof e)return e;var n,o="";return n=t.tap(function(e){return o+=e,""}).render(e,r),t.untap(),n.constructor!==t.constructor?n:""!==o&&o},sep:function(e,t,r){var n=r.block;return t.stack.index===t.stack.of-1?e:n?n(e,t):e},idx:function(e,t,r){var n=r.block;return _deprecated("{@idx}"),n?n(e,t.push(t.stack.index)):e},contextDump:function(e,t,r,n){var o,i=n||{},s=i.to||"output",a=i.key||"current";return s=dust.helpers.tap(s,e,t),a=dust.helpers.tap(a,e,t),o="full"===a?JSON.stringify(t.stack,jsonFilter,2):JSON.stringify(t.stack.head,jsonFilter,2),"console"===s?(_log(o),e):(o=o.replace(/</g,"\\u003c"),e.write(o))},if:function(chunk,context,bodies,params){var body=bodies.block,skip=bodies.else,cond;if(params&&params.cond){if(_deprecated("{@if}"),cond=dust.helpers.tap(params.cond,chunk,context),eval(cond))return body?chunk.render(bodies.block,context):(_log("Missing body block in the if helper!"),chunk);if(skip)return chunk.render(bodies.else,context)}else _log("No condition given in the if helper!");return chunk},math:function(e,t,r,n){if(n&&void 0!==n.key&&n.method){var o=n.key,i=n.method,s=n.operand,a=n.round,l=null;switch(o=dust.helpers.tap(o,e,t),s=dust.helpers.tap(s,e,t),i){case"mod":(0===s||s===-0)&&_log("operand for divide operation is 0/-0: expect Nan!"),l=parseFloat(o)%parseFloat(s);break;case"add":l=parseFloat(o)+parseFloat(s);break;case"subtract":l=parseFloat(o)-parseFloat(s);break;case"multiply":l=parseFloat(o)*parseFloat(s);break;case"divide":(0===s||s===-0)&&_log("operand for divide operation is 0/-0: expect Nan/Infinity!"),l=parseFloat(o)/parseFloat(s);break;case"ceil":l=Math.ceil(parseFloat(o));break;case"floor":l=Math.floor(parseFloat(o));break;case"round":l=Math.round(parseFloat(o));break;case"abs":l=Math.abs(parseFloat(o));break;default:_log("method passed is not supported")}return null!==l?(a&&(l=Math.round(l)),r&&r.block?e.render(r.block,t.push({isSelect:!0,isResolved:!1,selectKey:l})):e.write(l)):e}return _log("Key is a required parameter for math helper along with method/operand!"),e},select:function(e,t,r,n){var o=r.block;if(n&&void 0!==n.key){var i=dust.helpers.tap(n.key,e,t);return o?e.render(r.block,t.push({isSelect:!0,isResolved:!1,selectKey:i})):(_log("Missing body block in the select helper "),e)}return _log("No key given in the select helper!"),e},eq:function(e,t,r,n){return n?(n.filterOpType="eq",filter(e,t,r,n,function(e,t){return t===e})):e},ne:function(e,t,r,n){return n?(n.filterOpType="ne",filter(e,t,r,n,function(e,t){return t!==e})):e},lt:function(e,t,r,n){return n?(n.filterOpType="lt",filter(e,t,r,n,function(e,t){return e>t})):e},lte:function(e,t,r,n){return n?(n.filterOpType="lte",filter(e,t,r,n,function(e,t){return e>=t})):e},gt:function(e,t,r,n){return n?(n.filterOpType="gt",filter(e,t,r,n,function(e,t){return t>e})):e},gte:function(e,t,r,n){return n?(n.filterOpType="gte",filter(e,t,r,n,function(e,t){return t>=e})):e},default:function(e,t,r,n){return n&&(n.filterOpType="default"),filter(e,t,r,n,function(){return!0})},size:function(e,t,r,n){var o,i,s,a=0;if(n=n||{},o=n.key,o&&o!==!0)if(dust.isArray(o))a=o.length;else if(!isNaN(parseFloat(o))&&isFinite(o))a=o;else if("object"==typeof o){i=0;for(s in o)Object.hasOwnProperty.call(o,s)&&i++;a=i}else a=(o+"").length;else a=0;return e.write(a)}};for(var key in helpers)dust.helpers[key]=helpers[key];"undefined"!=typeof exports&&(module.exports=dust)}("undefined"!=typeof exports?require("dustjs-linkedin"):dust);